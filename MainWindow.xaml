<Window
    x:Class="WPFMusicPlayerDemo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:WPFMusicPlayerDemo"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="1280"
    Height="720"
    AllowsTransparency="True"
    Background="Transparent"
    MouseDown="Window_MouseDown"
    ResizeMode="NoResize"
    WindowStyle="None"
    mc:Ignorable="d">

    <Border
        x:Name="MainBorder"
        Margin="20"
        Background="White">
        <Border.Effect>
            <DropShadowEffect
                BlurRadius="20"
                Opacity="0.5"
                ShadowDepth="0"
                Color="Black" />
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="72" />
                <RowDefinition Height="*" />
                <RowDefinition Height="98" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Grid
                Grid.Row="0"
                Grid.ColumnSpan="2"
                Background="#50C878"
                ClipToBounds="True">

                <StackPanel
                    Margin="280,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Orientation="Horizontal">
                    <TextBox
                        x:Name="InputTextBox"
                        Grid.Column="0"
                        Width="200"
                        Height="25"
                        Padding="0,3"
                        BorderThickness="0,0,0,0"
                        FontFamily="Microsoft YaHei"
                        FontSize="14"
                        TextChanged="InputTextBox_TextChanged" />
                    <Button
                        Width="25"
                        Height="25"
                        Margin="0,0,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Background="White"
                        BorderThickness="0,0,0,0"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="10"
                        Foreground="#333333">

                        <Border
                            Width="17"
                            Height="17"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Background="#E1E1E1"
                            CornerRadius="3">

                            <!--  图标内容  -->
                            <TextBlock
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Background="Transparent"
                                RenderTransformOrigin="0.5,0.5"
                                Text="&#xE11A;">
                                <TextBlock.RenderTransform>
                                    <ScaleTransform ScaleX="-1" />
                                </TextBlock.RenderTransform>
                            </TextBlock>
                        </Border>
                    </Button>
                </StackPanel>

                <!--  最小化  -->
                <StackPanel
                    Margin="0,0,25,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Orientation="Horizontal">
                    <Button
                        Width="25"
                        Height="25"
                        Margin="0,0,5,0"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="MinButton_Click"
                        Content="&#xE921;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="14"
                        Foreground="White"
                        ToolTip="最小化" />

                    <!--  最大化/还原按钮  -->
                    <Button
                        x:Name="MaxRestoreButton"
                        Width="25"
                        Height="25"
                        Margin="0,0,5,0"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="MaxRestoreButton_Click"
                        Content="&#xE922;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="14"
                        Foreground="White"
                        ToolTip="最大化" />

                    <!--  关闭  -->
                    <Button
                        Width="25"
                        Height="25"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="CloseButton_Click"
                        Content="&#xE8BB;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="14"
                        Foreground="White"
                        ToolTip="关闭" />

                </StackPanel>

            </Grid>

            <Grid Grid.Row="1" Background="#ffffff">

                <!--  右边渐变  -->
                <Rectangle
                    Width="1.25"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Stretch">
                    <Rectangle.Fill>
                        <LinearGradientBrush StartPoint="1,0" EndPoint="0,0">
                            <GradientStop Offset="0" Color="#26000000" />
                            <GradientStop Offset="1" Color="Transparent" />
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                </Rectangle>

                <Rectangle Height="3" VerticalAlignment="Bottom">
                    <Rectangle.Fill>
                        <LinearGradientBrush StartPoint="0,1" EndPoint="0,0">
                            <GradientStop Offset="0" Color="#26000000" />
                            <GradientStop Offset="1" Color="Transparent" />
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                </Rectangle>

                <StackPanel
                    Margin="0,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Orientation="Vertical">
                    <DataGrid
                        x:Name="QueueDataGrid"
                        Height="220"
                        AutoGenerateColumns="False"
                        CanUserAddRows="False"
                        IsReadOnly="True"
                        SelectionMode="Single">
                        <DataGrid.Columns>
                            <DataGridTextColumn
                                Width="40"
                                Binding="{Binding Index}"
                                Header="#" />
                            <DataGridTextColumn
                                Width="*"
                                Binding="{Binding Title}"
                                Header="Title" />
                            <DataGridTextColumn
                                Width="150"
                                Binding="{Binding Artist}"
                                Header="Artist" />
                            <DataGridTextColumn
                                Width="80"
                                Binding="{Binding Duration}"
                                Header="Duration" />
                        </DataGrid.Columns>
                    </DataGrid>

                    <DataGrid
                        x:Name="PlaylistDataGrid"
                        Height="220"
                        AutoGenerateColumns="False"
                        CanUserAddRows="False"
                        IsReadOnly="True"
                        SelectionMode="Single"
                        MouseDoubleClick="PlaylistDataGrid_MouseDoubleClick">
                        <DataGrid.Columns>
                            <DataGridTextColumn
                                Width="40"
                                Binding="{Binding Index}"
                                Header="#" />
                            <DataGridTextColumn
                                Width="*"
                                Binding="{Binding Title}"
                                Header="Title" />
                            <DataGridTextColumn
                                Width="150"
                                Binding="{Binding Artist}"
                                Header="Artist" />
                            <DataGridTextColumn
                                Width="80"
                                Binding="{Binding Duration}"
                                Header="Duration" />
                        </DataGrid.Columns>
                    </DataGrid>

                    <!--  新建歌单按钮  -->
                    <Button
                        Width="80"
                        Margin="0,10,0,0"
                        Click="CreatePlaylistButton_Click"
                        Content="新建歌单" />

                    <!--  歌单选择 ComboBox  -->
                    <ComboBox
                        x:Name="PlaylistComboBox"
                        Width="80"
                        Margin="0,10,0,10"
                        DisplayMemberPath="Name"
                        SelectionChanged="PlaylistComboBox_SelectionChanged" />
                </StackPanel>

            </Grid>

            <Grid
                Grid.Row="1"
                Grid.Column="1"
                Background="#ffffff">

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Button
                    Grid.Row="0"
                    Margin="5"
                    Click="AddMusic_Click"
                    Content="添加音乐文件" />

                <DataGrid
                    x:Name="MusicDataGrid"
                    Grid.Row="1"
                    Margin="5"
                    AutoGenerateColumns="False"
                    IsReadOnly="True"
                    ItemsSource="{Binding MusicList}"
                    MouseDoubleClick="DataGrid_MouseDoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn
                            Width="200"
                            Binding="{Binding Title}"
                            Header="标题" />
                        <DataGridTextColumn
                            Width="100"
                            Binding="{Binding Artist}"
                            Header="歌手" />
                        <DataGridTextColumn
                            Width="100"
                            Binding="{Binding Album}"
                            Header="专辑" />
                        <DataGridTextColumn
                            Width="50"
                            Binding="{Binding Format}"
                            Header="格式" />
                        <DataGridTextColumn
                            Width="50"
                            Binding="{Binding Size}"
                            Header="大小" />
                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding Duration}"
                            Header="时长" />
                    </DataGrid.Columns>
                    <DataGrid.ContextMenu>
                        <ContextMenu>
                            <MenuItem Click="AddToQueue_Click" Header="添加到播放列表" />
                            <MenuItem Click="AddToPlaylist_Click" Header="添加到所选歌单" />
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                </DataGrid>

                <!--  左边渐变  -->
                <Rectangle
                    Width="1.25"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Stretch">
                    <Rectangle.Fill>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Offset="0" Color="#26000000" />
                            <GradientStop Offset="1" Color="Transparent" />
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                </Rectangle>

                <Rectangle
                    Grid.Row="1"
                    Grid.Column="1"
                    Height="3"
                    VerticalAlignment="Bottom">
                    <Rectangle.Fill>
                        <LinearGradientBrush StartPoint="0,1" EndPoint="0,0">
                            <GradientStop Offset="0" Color="#26000000" />
                            <GradientStop Offset="1" Color="Transparent" />
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                </Rectangle>

            </Grid>

            <Grid
                Grid.Row="2"
                Grid.ColumnSpan="2"
                Background="#ffffff">

                <!--  上一首  -->
                <StackPanel
                    Margin="0,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Orientation="Horizontal">

                    <Slider
                        x:Name="ProgressSlider"
                        Width="800"
                        Maximum="1"
                        Minimum="0"
                        PreviewMouseLeftButtonDown="ProgressSlider_PreviewMouseDown"
                        PreviewMouseLeftButtonUp="ProgressSlider_PreviewMouseUp"
                        Value="0" />
                    <TextBlock x:Name="CurrentTimeText" />
                    <TextBlock x:Name="TotalTimeText" />

                    <Button
                        Width="40"
                        Height="40"
                        Margin="0,0,15,0"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="BackButton_Click"
                        Content="&#xE100;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="20"
                        Foreground="#50C878"
                        ToolTip="上一首" />


                    <!--  暂停/播放  -->
                    <Button
                        x:Name="PlayPauseButton"
                        Width="40"
                        Height="40"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"
                        Background="#50C878"
                        BorderThickness="0"
                        Click="PlayPauseButton_Click"
                        ToolTip="播放">

                        <!--  圆形模板  -->
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Grid>
                                    <Ellipse x:Name="circle" Fill="{TemplateBinding Background}" />
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Grid>

                                <!--  鼠标悬停和按下效果  -->
                                <ControlTemplate.Triggers>
                                    <!--  鼠标悬停  -->
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="circle" Property="Fill" Value="#3FAE66" />
                                    </Trigger>
                                    <!--  按下  -->
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="circle" Property="Fill" Value="#2E8B57" />
                                    </Trigger>
                                    <!--  禁用状态  -->
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter TargetName="circle" Property="Fill" Value="#A9A9A9" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>


                        <!--  使用图标字体作为内容  -->
                        <TextBlock
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="20"
                            Foreground="White"
                            Text="&#xE768;" />
                    </Button>

                    <!--  下一首  -->
                    <Button
                        Width="40"
                        Height="40"
                        Margin="15,0,0,0"
                        HorizontalContentAlignment="Center"
                        VerticalContentAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="NextButton_Click"
                        Content="&#xE101;"
                        FontFamily="Segoe MDL2 Assets"
                        FontSize="20"
                        Foreground="#50C878"
                        ToolTip="下一首" />
                    <Button
                        x:Name="PlayModeButton"
                        Width="120"
                        Height="30"
                        Click="PlayModeButton_Click"
                        Content="顺序循环" />

                </StackPanel>

            </Grid>

        </Grid>

    </Border>

</Window>
